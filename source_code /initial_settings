import RPi.GPIO as GPIO

# 부저 핀(왼쪽, 오른쪽)
LEFT_BUZZER_PIN = 30
RIGHT_BUZZER_PIN = 8

# 초음파 센서 및 부저 핀 설정
TRIGGER_LEFT = 27
ECHO_LEFT = 28
TRIGGER_MIDDLE = 10
ECHO_MIDDLE = 11
TRIGGER_RIGHT = 15
ECHO_RIGHT = 16

# GPIO 설정
GPIO.setmode(GPIO.BCM)
GPIO.setup(LEFT_BUZZER_PIN, GPIO.OUT)
GPIO.setup(RIGHT_BUZZER_PIN, GPIO.OUT)
GPIO.setup(TRIGGER_LEFT, GPIO.OUT)
GPIO.setup(ECHO_LEFT, GPIO.IN)
GPIO.setup(TRIGGER_MIDDLE, GPIO.OUT)
GPIO.setup(ECHO_MIDDLE, GPIO.IN)
GPIO.setup(TRIGGER_RIGHT, GPIO.OUT)
GPIO.setup(ECHO_RIGHT, GPIO.IN)

# softToneCreate 함수 대신 GPIO.PWM을 사용하여 PWM 출력을 생성
left_buzzer_pwm = GPIO.PWM(LEFT_BUZZER_PIN, 1000)
right_buzzer_pwm = GPIO.PWM(RIGHT_BUZZER_PIN, 1000)

# set up
try:
    GPIO.setwarnings(False)  # 경고 메시지 표시 안 함

    # 부저 PWM 시작
    left_buzzer_pwm.start(0)
    right_buzzer_pwm.start(0)

    while True:
        # 각 초음파 센서로 거리 측정
        # (여기에 해당하는 부분을 센서와의 상호 작용을 통해 작성해야 함)

        # 거리에 따라 부저 작동 여부 판단
        # (여기에 해당하는 부분을 거리에 따라 부저를 작동하도록 작성해야 함)

except KeyboardInterrupt:
    # 프로그램 종료 시 GPIO 정리
    left_buzzer_pwm.stop()
    right_buzzer_pwm.stop()
    GPIO.cleanup()
